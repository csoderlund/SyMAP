<!DOCTYPE html>
<html>
<head>
<title>SyMAP Input</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../style.css">
</head>

<body>
<!------ left side index - customize ----------------------------------------------------->
<div class="sidenav">
<a href="https://csoderlund.github.io">
		<img src="../img/agcol_logo.gif" alt="AGCoL" style="width: 160px; border:1px solid black; background: white;"></a>
<p class=sidetit>&nbsp;&nbsp;Input</p>
<p>
<a href="#projDir">Input files</a>
<a href="#if">xToSymap</a>
<a href="./ncbi.html" class="ext" target="_blank">NCBI</a>
<a href="./ensembl.html" class="ext" target="_blank">Ensembl</a>
<a href="./Other.html" class="ext" target="_blank">Other</a>
<a href="#gen">General</a>
<p>&nbsp;
<a href="#top">Go to top</a>
</div>

<!------ right side header and body ----------------------------------------------------->
<div class="rightSide">
<a id="top"></a>

<div class="topnav"> <!-- header same in all pages -->
    <br>
	<table>
	<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<td><a href="http://www.arizona.edu">
		<img src="../img/UA.gif" alt="UA" title="University of Arizona"  style="width: 40px; border:1px solid black"></a>
	<td><a href="http://www.bio5.org">
		<img src="../img/bio5.gif" alt="BIO5" title="BIO5"  style="width: 40px; border:1px solid black"></a>
	<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<td><a href="https://csoderlund.github.io/SyMAP">SyMAP<br>Home</a>&nbsp;&nbsp;
	<td><a href="https://github.com/csoderlund/SyMAP/releases">Download</a>&nbsp;&nbsp;
	<td><a href="../Docs.html">Docs</a>&nbsp;&nbsp;
	<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<td><a href="../SystemGuide.html">System<br>Guide</a>&nbsp;&nbsp;
	<td><a href="../input/index.html">Input</a>&nbsp;&nbsp;
	<td><a href="../SystemHelp.html">Parameters</a>&nbsp;&nbsp;
	<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<td><a href="../UserGuide.html">User<br>Guide</a>&nbsp;&nbsp;
	<td><a href="../Query.html">Queries</a>
	</table>
 </div>

<!---------------------------- bulk of page ------------------------------------------->
<div class="main">
<p>&nbsp;
<center>
<table>
<tr>
<td style="vertical-align: text-top;">
   <table>
   <tr><td>&nbsp;&nbsp;<td><u>Input files</u>
   <tr><td>&nbsp;&nbsp;<td><a href="#seqprep">Sequence</a>
   <tr><td>&nbsp;&nbsp;<td><a href="#annot">Annotation</a>
   <tr><td>&nbsp;&nbsp;<td><a href="#dir">Location of files</a> <!-- ref# in code -->
   </table>

<td style="vertical-align: text-top;">
   <table>
   <tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<td><u>xToSymap</u>
   <tr><td>&nbsp;&nbsp;<td><a href="#if">Interface</a> <!-- ref# in code -->
   <tr><td>&nbsp;&nbsp;<td><a href="#sf">Summarize</a>
	<tr><td>&nbsp;&nbsp;<td><a href="#convert">Convert</a>
   <tr><td>&nbsp;&nbsp;<td><a href="#ol">Lengths</a>
   <tr><td>&nbsp;&nbsp;<td><a href="#sp">Split</a>
   </table>
<td style="vertical-align: text-top;">
 	<table>
 	<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<td><u>Convert</u>
    <tr><td>&nbsp;&nbsp;<td><a href="./ncbi.html" class="ext" target="_blank">NCBI</a>
    <tr><td>&nbsp;&nbsp;<td><a href="./ensembl.html" class="ext" target="_blank">Ensembl</a>
    <tr><td>&nbsp;&nbsp;<td><a href="./Other.html" class="ext" target="_blank">Other</a>
    </table>
<td style="vertical-align: text-top;">
   <table>
   <tr><td>&nbsp;&nbsp;<td><u>General</u>
   <tr><td>&nbsp;&nbsp;<td> <a href="#edit">Editing the convert scripts</a>
   <tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<td> <a href="#tg">Tested Genomes</a>

   </table>
</table>
</center>

<a id="projDir"></a> <!-- accessed in SystemGuide -->
<h2>Input files</h2>
<table class="tz">
   <tr>
   <td><a href="#seqprep">Sequence</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
   <td><a href="#annot">Annotation</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
   <td><a href="#iloc">Location of files</a>
   <td class="colrt"><a href="#top">Go to top</a>
</table>
<p>
The input is one or more FASTA files of chromosome, sequenced contigs or scaffold sequences, with optional GFF formatted
annotation file(s).
<p>
<ul>
<li>As of v5.5.7, NCBI and Ensembl files can be loaded directly.
See <a href="#tg">Tested genomes</a> for results on loading the files directly.
<p>
<li><ttp>xToSymap</ttp> converts the NCBI and Ensembl files to a format friendly to <ttp>symap</ttp>;
i.e. <i>it is superior</i> than directly loading the files;
see <a href="./ncbi.html" class="ext" target="_blank">NCBI</a> and <a href="./ensembl.html"  class="ext" target="_blank">Ensembl</a>.
If you are using files from another source, see <a href="./other.html" class="ext" target="_blank">Other</a>.
<p>
<li>The documentation and SyMAP interface assumes a knowledge of the Linux directory (folder) structure, as
used by a terminal application.
</ul>

<a id="seqprep"></a> <!-- accessed in SystemHelp -->
<h3>Sequence files</h3>
The sequence file(s) must be FASTA format with one or more sequences.
For the FASTA format, the name of a sequence is the string immediately following the "&gt;", e.g.
<pre>
&gt;Chr3  Oryza Sativa
GAATTCGAATTTGGGTAATGCTAATCAATACAGGTCAAAATCTATGTATTGAGTGGAATATACTGCAAAGTAATTACCTT
CTTCCAAAGGAAAGCATTCCTTCTCTCTTGTGGGACTAGCAGATGATCTCGCAGCCAAGACGTGACCACCCAAGGCTCAC
...
</pre>
In this example, the sequence name is "Chr3" and the chromosome 3 sequence follows. The additional information
"Oryza Sativa" is ignored.

<p>
<i>Important points in naming sequences for SyMAP</i>:
<table style="margin-left:10px;margin-top:5px;padding:5px">
   <tr><td style="vertical-align: text-top;">A.
      <td style="vertical-align: text-top;">
         Sequence names <u>can only contain</u> letters, numbers, and underscores.
         This is in contrast with names allowed in
         <a href="http://www.sequenceontology.org/gff3.shtml" class="ext" target="_blank">gff3 files</a>,
         which allows the <ttx>seqid</ttx> to contain the additional characters of [.:^*$@!+?-|].
         The sequence name (<ttx>seqid</ttx>) must be renamed if it contains any of these characters.
   <tr><td style="vertical-align: text-top;">B.
      <td style="vertical-align: text-top;">
         The sequence names <u>must <i>exactly</i> </u>match those
         used in the annotation files (first column), or the annotations will not be loaded.
   <tr><td style="vertical-align: text-top;">C.
      <td style="vertical-align: text-top;">
         Use a consistent prefix such as "Chr" for all sequences,
         then set <ttl>Group prefix</ttl> to the prefix in project's
         <a href="../SystemHelp.html#projParams"  class="ext" target="_blank">Parameter</a> panel.
   <tr><td style="vertical-align: text-top;">D.
      <td style="vertical-align: text-top;">
         If there is not a consistent prefix, you may leave the <ttl>Group prefix</ttl> blank;
         beware, this can have unintended results, so should be avoided if possible.
         <u><i>Make the names short</i></u> so they will not clutter the display. You may
         need to rename your sequence, in which case, it must be done in the FASTA
         and GFF files.
   <tr><td style="vertical-align: text-top;">E.
      <td style="vertical-align: text-top;">
         The <ttp>xToSymap</ttp>
         <a href="./ncbi.html" class="ext" target="_blank">NCBI</a>
        and <a href="./ensembl.html" class="ext" target="_blank">Ensembl</a> conversion programs
        will create a short name for the sequences and provide the renaming in both
        the FASTA and GFF files. One of these programs may also work for files created elsewhere;
        see <a href="./other.html" class="ext" target="_blank">Other inputs</a>.
</table>

<p><i>Masking</i>: Decide whether the sequences need to be repeat masked.<p>
<ul>
<li>SyMAP does not perform the repeat-masking so it must be done with another program.
However, you may obtain masked sequences from NCBI or Ensembl.
<ul><li>NCBI provides soft-masked sequences where the <ttp>xToSymap</ttp>
<a href="ncbi.html#opts"  class="ext" target="_blank"> NCBI</a> interface provides the option
to change it to hard-masked.
<li>Ensembl provides both soft and hard-masked sequences.
</ul>
<li>Masking reduces alignment time and false-positive hits,
but also runs a risk of concealing true hits due to inaccurate masking.
Masking is not really necessary unless the genome is highly repetitive
<i>and</i> those repeats are shared with other genomes being aligned.
Repeats cause particular trouble for self-alignments.

<li>Occasionally, MUMmer fails aligning sequences, which can be resolved by masking the
sequence
(see <a href="../MUMmer.html" class="ext" target="_blank">MUMmer</a>,
which explains detection and solutions
for known reasons for failure).
</ul>
<p>
Another masking option, which is available if you have gene
annotation, is to mask out everything but the annotated genes. You
can enable the <ttl>Mask non-genes</ttl> option on the
<a href="../SystemHelp.html#pairParams"  class="ext" target="_blank">Pair Parameter</a> window;
turn it on <i>before</i> doing the alignments.

<!--------------------------------------------------------------------->
<a id="annot"></a> <!-- used in SystemHelp -->
<h3>Annotation files</h3>

Annotation files should be in
<a href="http://www.sequenceontology.org/gff3.shtml" class="ext" target="_blank">gff3 format</a>,
which is a tab-delimited file of 9 columns.

<table class="tx">
<tr><td  style="vertical-align: text-top;"><ttx>Seqid</ttx>
     <td>The first column must exactly match the sequence names in the FASTA files.
<tr><td  style="vertical-align: text-top;"><ttx>Type</ttx>
    <td>The third column determines how SyMAP uses the entry.
	<br>Only types <ttx>gene</ttx>, <ttx>mRNA</ttx>, <ttx>exon</ttx>, <ttx>gap</ttx> or <ttx>centromere</ttx> are recognized.
<tr><td  style="vertical-align: text-top;"><ttx>Attribute</ttx>
    <td>The last column contains "keyword=value" pairs describing the annotation.
	<table>
		<tr><td style="vertical-align: text-top;">a. <td>The genes/mRNAs <i><u>must</u></i> have a <ttx>ID=</ttx> keyword,
		and your mRNAs/exons <i><u>must</u></i> have a <ttx>Parent=</ttx> keyword.
		<tr><td style="vertical-align: text-top;">b.
		<td>For genes, by default all attributes are saved in the database for viewing.
		You can set which attributes keywords to save by opening the
		<a href="../SystemHelp.html#projParams"  class="ext" target="_blank">Project Parameter</a> panel
		and entering them for the parameter <ttx>Anno keywords</ttx>.
	</table>
<tr><td  style="vertical-align: text-top;"><ttl>Order</ttl>
	<td>Each mRNA and its exons must come after the parent gene and before the next gene.
	<br>The mRNA must be before its exons, but it is okay if all the mRNAs for a gene are listed first.
	<br>Exons are entered in the order they are found; they must be either ascending or descending.
</table>
<br>
For example (extracted from Ensembl gff3 file):
<pre>
<small>
1   araport11   gene   11649   13714   .   -   .   ID=gene:AT1G01030;Name=NGA3;....
1   araport11   mRNA   11649   13714   .   -   .   ID=transcript:AT1G01030.2;Parent=gene:AT1G01030....
1   araport11   three_prime_UTR   11649   11863   .   -   .   Parent=transcript:AT...
1   araport11   exon   11649   12354   .   -   .   Parent=transcript:AT1G01030.2....
1   araport11   CDS   11864   12354    .   -   2   ID=CDS:AT1G01030.2;Parent=transc...
1   araport11   CDS   12424   12940    .   -   0   ID=CDS:AT1G01030.2;Parent=transc...
1   araport11   exon   12424   13173   .   -   .   Parent=transcript:AT1G01030.2....
1   araport11   five_prime_UTR   12941   13173   .   -   .   Parent=transcript:AT...
1   araport11   exon   13335   13714   .   -   .   Parent=transcript:AT1G01030.2....
1   araport11   five_prime_UTR   13335   13714   .   -   .   Parent=transcript:AT...
1   araport11   mRNA   11649   13714   .   -   .   ID=transcript:AT1G01030.1;Parent=gene:AT1G01030....
1   araport11   three_prime_UTR   11649   11863   .   -   .   Parent=transcript:AT...
1   araport11   exon   11649   13173   .   -   .   Parent=transcript:AT1G01030.1....
1   araport11   CDS   11864   12940    .   -   0   ID=CDS:AT1G01030.1;Parent=transc...
1   araport11   five_prime_UTR   12941   13173   .   -   .   Parent=transcript:AT...
1   araport11   exon   13335   13714   .   -   .   Parent=transcript:AT1G01030.1....
1   araport11   five_prime_UTR   13335   13714   .   -   .   Parent=transcript:AT...
</small>
</pre>

For the above example, the following information will be saved in the SyMAP database:
<pre>
<small>
1   gene   11649   13714   ID=AT1G01030;Name=NGA3;rnaID=AT1G01030.2;desc=....
1   exon   11649   12354
1   exon   12424   13173
1   exon   13335   13714
</small>
</pre>
<!---------------------------------------------------------->
<hr>

<!-------------------------------------------------------------------->
<a id="dir"></a>
<h3>Location of files</h3>

<u>Project name and directory</u>:
<p>
<ul>
<li>The <ttx>project-name</ttx> should be a short descriptive name
containing only alphanumeric characters, periods, underscores and hyphens; do not use symbols like %, $, spaces, etc.
The names are case-sensitive, so you cannot have "Mus" and "mus" for two different projects.
<p>
<li>The <ttx>project-name</ttx> is the same as the <ttx>directory name</ttx> for the project, i.e.
<br>&nbsp;&nbsp;&nbsp;<tt>data/seq/&lt;project-name&gt;</tt>
<p>
<li>The <ttx>project-name</ttx> is used in the results directory name and  MUMmer output file names.
<br>For example, the alignments between <ttx>project-names</ttx> <tt>demo_seq</tt> and <tt>demo_seq2</tt> are in the directory
<br>&nbsp;&nbsp;&nbsp;<tt>data/seq_results/demo_seq_to_demo_seq2</tt>
<br>and the MUMmer results file are named using it, e.g.
<br>&nbsp;&nbsp;&nbsp;<tt>demo_seq_f2.demo_seq_f1.mum</tt>.
<p>
<li><i>You should not rename this directory</i> after the data is loaded into SyMAP! However, you can
define a <ttl>Display Name</ttl> in the project's <a href="../SystemHelp.html#display" target="_blank" class="ext">Parameter</a> to be used in the symap displays,
which can be change at any time.
</ul>

<a id="iloc"></a>
<p><u>Location</u>:

<p>Each project has a directory as follows:
<pre>
  /data/seq/&lt;project-name&gt;
</pre>

<p>The default location for sequence and annotation files is:
<pre>
  /data/seq/&lt;project-name&gt;/sequence
  /data/seq/&lt;project-name&gt;/annotation
</pre>
<a id="create"></a>
<u>Create project</u>: Use one of the following ways to indicate to <ttp>symap</ttp> where the project's input files are:
<ol>
<li><i>Default</i>: Create  these sub-directories under <tt>/data/seq</tt> and put your files there,
<br>e.g using <ttx>project-name=foobar</ttx>:
<pre>
  cd data/seq
  mkdir foobar
  cd foobar
  mkdir sequence
  mkdir annotation
</pre>
Move your FASTA file(s) to <tt>data/seq/&lt;project-name&gt;/sequence</tt>
(e.g. <tt>data/seq/foobar/sequence</tt>)
and your optional GFF files(s) to <tt>data/seq/&lt;project-name&gt;/annotation</tt>
(e.g. <tt>data/seq/foobar/annotation</tt>)
<p>
<li><i><ttp>xToSymap</ttp></i>: This program puts the files in the <i>default</i> locations;
see <a href="#if">xToSymap</a>.
<p>
<li><i>Link</i>: Create these sub-directories under <tt>/data/seq</tt> and use soft links to point to the file locations,
<br>e.g using <ttx>project-name=foobar</ttx>:
<pre>
  cd data/seq
  mkdir foobar
  cd foobar
  ln -s &lt;location of directory of sequence files&gt; sequence
  ln -s &lt;location of directory of annotation files&gt; annotation
</pre>
<li><i>Add and define</i>:
<ul>
<li>Use the <ttb>Add project</ttb> button on the <ttp>symap</ttp>
interface (lower-left corner; see <a href="../SystemGuide.html#intro" target="_blank" class="ext">Manager</a>).
This add the <ttx>project name</ttx> to the <tt>data/seq</tt> directory.
<li>Use the <a href="SystemHelp.html#projParams" class="ext" target="_blank">project's parameter</a>
panel to enter the location of the sequences and optional annotation files into the <ttx>Sequence files</ttx>
and <ttx>Anno files</ttx> parameters.
</ul>
</ol>
<p>For options 1-3, it is not necessary to enter the locations of the files in the
<a href="SystemHelp.html#projParams" class="ext" target="_blank"> project parameter</a> panel since
they use the default locations.
<p>

<table>
<tr><td style="vertical-align: text-top;">
All sub-directories in <tt>data/seq</tt> are shown on the left-panel under <ttb>Projects</ttb>
using its <ttl>Display name</ttl>, which is set in the project's parameters.
<p>Select a <ttb>Project</ttb> to show it on the right-hand side; the <ttx>project-name</ttx> is shown beside
the label <ttl>Directory</ttl>.
<td>
<a href="../img/demoLoad.png"><img src="../img/demoLoad.png" alt="projNew2" style="border: 1px solid black; width: 450px"></a>
</table>
<u>Load project</u> accesses the files and loads them into the database.

<p>The <ttp>symap</ttp> program requires the directories to be present (and will create them if necessary),
<ttp>viewSymap</ttp> does not access the directories.

<!---------------------------------------------------------->
<hr>
<a id="if"></a> <!-- ref# in code --->
<h2>xToSymap Interface</h2>
<table class="tz"><tr>
<td><a href="#if">Interface</a>
   <td><a href="#sf">Summarize</a>
   <td><a href="#convert">Convert</a>
   <td><a href="#ol">Lengths</a>
   <td><a href="#sp">Split</a>&nbsp;
   <td class="colrt"><a href="#top">Go to top</a>
</table>
<p>
<br><ttp>xToSymap</ttp> was added to the SyMAP tar file in release v5.5.7 and updated in v.5.5.8.
<p>
<a id="ifi"></a>
<table>
	<tr><td style="vertical-align: text-top;">
	<p><ttl>Project Directory</ttl>: All options and function buttons will be disabled until a project directory is selected.

	<p>The options <ttl>Converted</ttl>, <ttb>Lengths</ttb> and <ttb>Split</ttb> are
	disabled when there is no <ttx>/sequence</ttx> sub-directory, which is created when  <ttb>Convert</ttb>
	is executed.
	<p><ttb>Convert</ttb> options:
	<ul style="margin: 0px 5px 0px 0px;">
	<li>When <ttl>NCBI</ttl> is selected, all the options relevant to it will be enabled.
	Similarly for <ttl>Ensembl</ttl>.
	<li><ttl>NCBI</ttl> has the <ttl>Hard Mask</ttl> option and <ttl>Ensembl</ttl> has the <ttl>Only #,X,Y,I</ttl>
	option.
	<li>The rest of the options work for both.
	<li>See <a href="./ncbi.html#opts" class="ext" target="_blank">NCBI</a>
			and <a href="./ensembl.html#opts" class="ext" target="_blank">Ensembl</a>
			for a description of the options.
	</ul>

	<td><a href="img/toSymap.png"><img src="img/toSymap.png" alt="" style="border: 1px solid black; width: 360px"></a>
</table>
Perform the following steps:
<table class="ty">
<tr><td style="vertical-align: text-top;">1.
	<td style="white-space: nowrap; vertical-align: text-top;"><a href="#sf">Summarize</a>
	<td>This will output basic statistics. Run this first to make sure your input is valid.
<tr><td style="vertical-align: text-top;">2.
	<td style="white-space: nowrap; vertical-align: text-top;"><a href="#convert">Convert</a>
	<td>The <ttl>NCBI</ttl> and <ttl>Ensembl</ttl> options create the <ttx>/sequence</ttx> and <ttx>/annotation</ttx>
		sub-directories with files ready for input to <ttp>symap</ttp>. If these sub-directories exist,
		any existing FASTA and GFF files will first be removed.
<tr><td style="vertical-align: text-top;">3.
	<td style="white-space: nowrap; vertical-align: text-top;"><a href="#sf1">Summarize</a>
		<br>with <ttl>Converted</ttl>
	<td>Run this to make sure that the conversion worked as you expected.
	<br>This shows the sequence prefixes, and can be used to set the <ttl>Group Prefix</ttl>
	in the <ttp>symap</ttp>  <a href="../SystemHelp.html#projParams" class="ext" target="_blank">Project Parameters</a>.
<tr><td colspan=3>Optional. The following run on the files in the <ttx>/sequence</ttx> and <ttx>/annotation</ttx>
		sub-directories.
<tr><td style="vertical-align: text-top;">4.
	<td style="white-space: nowrap; vertical-align: text-top;"><a href="#ol">Lengths</a>
	<td>Run it to see if you need to set a <ttl>Minimal lengths</ttl> value in
	<ttp>symap</ttp> <a href="../SystemHelp.html#projParams" class="ext" target="_blank">Project Parameters</a>.
<tr><td style="vertical-align: text-top;">5.
	<td style="white-space: nowrap; vertical-align: text-top;"><a href="#sp">Split</a>
	<td>Splits the converted file <ttx>genomic.fna</ttx> and <ttx>anno.gff</ttx> into a file per chromosome.
</table>

<br><font color="red">NOTE</font>: The NCBI and Ensembl files have variations and I may not have accounted for them all.
If <ttb>Convert</ttb> does not work as you wish, the files <tt>ConvertNCBI.java</tt> and <tt>ConvertEnsembl.java</tt>
are available for <a href="#edit">Edit</a>.
<p>

<!---------------------------------------------------------->
<a id="sf"></a>
<h3>Summarize</h3>
<ttb>Summarize</ttb> will look in the following directories for the FASTA and optional GFF files
to process, in the following order (this assumes a <ttl>project name</ttl> is <tt>cabb</tt>):

<ol>
<li>Directly under the project's directory, e.g.
<pre>
 symap_5/data/seq/cabb
    Brassica_oleracea.BOL.dna_sm.toplevel.fa.gz
    Brassica_oleracea.BOL.59.gff3.gz
</pre>
<li>The project's <tt>ncbi_datasets/data/&lt;sub-directory&gt;</tt>, e.g.
<pre>
 symap_5/data/seq/cabb/data/seq/ncbi_dataset/data/GCF_000695525.1
    GCF_000695525.1_BOL_genomic.fna
    genomic.gff
</pre>
<li>The project's sub-directories <tt>/sequence</tt> and <tt>/annotation</tt>, e.g
<pre>
 symap_5/data/seq/cabb
    sequence/
       genomic.fna
    annotation/
       anno.gff
</pre>
</ol>
The FASTA file must end in .fas, .fa, .fna, .fasta, .seq (with optional .gz).
<br>The GFF file must end in .gff or .gff3 (with optional .gz).

<a id="sf1"></a>
<p><ttb>Summarize</ttb> with <ttl>Converted</ttl> assumes there are converted files.

<p>The following is an example terminal and log file output:
<p>

<pre>
------ Summary for ./data/seq/cabbN ------
Log file to  ./data/seq/cabbN/xSummary.log
Sequence directory: ./data/seq/cabbN/ncbi_dataset/data/GCF_000695525.1      29-Jul-2024 10:16
   GCF_000695525.1_BOL_genomic.fna
Annotation directory: ./data/seq/cabbN/ncbi_dataset/data/GCF_000695525.1
   genomic.gff

FASTA sequence file(s)
Example header lines:
   Chr:  &gt;NC_027748.1 Brassica oleracea var. oleracea cultivar TO1000 chromosome C1, BOL, ...
   Scaf: &gt;NW_013617415.1 Brassica oleracea var. oleracea cultivar TO1000 unplaced genomic ...
   Mt:   &gt;NC_016118.1 Brassica oleracea mitochondrion, complete genome

Count Totals:
      9 Chromosomes
 32,876 Scaffolds
      1 Mt/Pt
 32,886 Total sequences

Count Prefixes:
 32,876 NW_
     10 NC_

Counts of Length Ranges:
   32,284&lt;10k   552&lt;100k   41&lt;1M   &lt;10M   5&lt;50M   4&lt;100M
   488,954,160 Total length

GFF Annotation file(s)
Summary:
  44,386 Genes from 49,563    (use protein_coding only)
  44,382 mRNAs from 56,687    (44,382 has protein_id)
 227,191 Exons from 398,922

Gene Attribute:
  44,386 Dbxref                     44,386 ID
  44,386 Name                          569 end_range
       7 exception                  44,386 gbkey
  44,386 gene                       44,386 gene_biotype
      81 locus_tag                       7 part
     985 partial                       499 start_range
mRNA Attribute:
  44,305 product

Input type: NCBI chr NC_ prefix; NCBI GFF header
            NCBI 'gene_biotype' keyword; NCBI mRNA 'product' keyword
------ Finish summary for ./data/seq/cabbN/ ------
</pre>

Observations:
<table>
<tr><td style="vertical-align: text-top;">1. <td>The last line confirms that the <ttl>NCBI</ttl> radio button should be selected for <ttb>Convert</ttb>.
<tr><td style="vertical-align: text-top;">2. <td>It shows that there are 9 chromosomes to be converted to symap files.
<tr><td style="vertical-align: text-top;">3. <td>It confirms that an mRNA and exons are found for each protein-coding gene.
<tr><td style="vertical-align: text-top;">4. <td>On the first example line, it has 'chromosome C1'.
Since the 'chromosome' is followed by 'C1' instead of a digit (i.e. 1), the chromosome identifier will be 'C1'
in the conversion.
<tr><td style="vertical-align: text-top;">5. <td>After conversion, the summary will be like this
<a href="./logs/sumCabbNcnv.html" class="ext" target="_blank">log</a> file.
<br>There is a remark that the file may be hard-masked, which was not done by the <ttl>ConvertNCBI</ttl>;
strangely, the chromosomes in the NCBI file were hard-mask but the scaffolds were soft-masked.
If the summary has been computed with <ttl>Verbose</ttl>, it would show the count of all nucleotides
upper and lower case, which would show zero lowercase and many N's.
</table>


<h4>Verbose</h4>

The Ensembl cabbage files <ttl>Verbose</ttl> summary log file look like this
<a href="./logs/sumCabbEv.html" class="ext" target="_blank">Ensembl summary log</a>.
The verbose mode takes longer to execute, but has the following extra information:
<ul>
<li>From FASTA:
<ul>
<li>Base count (maximum 2,147,483,647 bases).
<li>Lengths of 5 sequences.
</ul>
<li>From GFF:
<ul>
<li>The first gene, mRNA and exons lines.
<li><ttx>Types</ttx>, e.g. gene, mRNA, and exon.
<li><ttx>Gene Attributes biotype</ttx>, e.g. protein_coding.
</ul>
</ul>

<br>As shown in <a href="#tg">Tested genomes</a>, it appears to be more common not to have
a letter before the chromosome number (e.g. chromosome 1), in which case the chromosome identifier will be Chr01.
For example, for Homo sapiens, see the
<a href="./logs/sumHsaN.html" class="ext" target="_blank">NCBI summary log</a>
compared to the <a href="./logs/sumHsaE.html" class="ext" target="_blank">Ensembl summary log</a>
(both are <ttl>Verbose</ttl> output).

<p><ttb>Summarize</ttb> shows a few of the header lines, and with <ttl>Verbose</ttl> checked, more are shown.
This should aid in determining how to set the options.
If this is not enough, execute the following on your FASTA file:
<pre>
   zgrep ">" [use your FASTA file name]
</pre>

<!---------------------------------------------------------->
<a id="convert"></a>
<h3>Convert</h3>

<table>
	<tr><td style="vertical-align: text-top;">1. <td>Select <ttl>NCBI</ttl> or <ttl>Ensembl</ttl>.
	<tr><td style="vertical-align: text-top;">2. <td>Select the options you want; see
	 <a href="./ncbi.html#opts" class="ext" target="_blank">NCBI</a>
			or <a href="./ensembl.html#opts" class="ext" target="_blank">Ensembl</a> options.
	<tr><td style="vertical-align: text-top;">3. <td>Select <ttb>Convert</ttb>.
</table>

<!---------------------------------------------------------->
<a id="ol"></a>
<h3>Lengths</h3>
The FASTA files must be in the project's <ttx>/sequence</ttx> sub-directory
(e.g. <ttx>symap_5/data/seq/cabbN</ttx>) for this
to work. It reads the FASTA file(s), prints out the names and lengths of all sequences, then
writes a summary.
<p><i>Summary</i>: If your file has many small scaffolds and you just want to process the large
ones, the summary will help you decide what to you as the project's
<a href="../SystemHelp.html#projParams"  class="ext" target="_blank">Parameter</a>
<ttl>Minimum length</ttl> values. For example, the following <ttb>Length</ttb> output:
<p>
<pre>
Values for parameter 'Minimal length' (assuming no duplicate lengths):
#Seqs Minimum length
   10  550,871
   20  193,719
   30  152,041
   40  122,531
   50   98,180
   60   85,914
   70   70,524
   80   65,697
   90   61,049
  100   58,280
</pre>
If you set the minimal length at 550871, SyMAP will process the 10 largest sequences.

<a id="sp"></a>
<h3>Split</h3>

The input files are:
<pre>
	sequence/genomic.fna
	annotation/anno.gff
</pre>
The function will do the following:
<ul>
<li>Split <tt>genomic.fna</tt> into a separate file per chromosome, and put all other
sequences in <tt>scaf.fna</tt>. The <tt>genomic.fna</tt> file is deleted when done.
<li>Split <tt>anno.gff</tt> into a separate file per chromosome, and put all other
sequences in <tt>scaf.gff</tt>. The <tt>anno.gff</tt> file is deleted when done.
</ul>
These work as input to <ttp>symap</ttp>.
It is useful when only one or a few chromosomes are to be processed in <tt>symap</tt>, i.e.
remove the ones you do not want processed.
<!---------------------------------------------------------->
<a id="gen"></a>
<h2>General</h2>
<table class="tz"><tr>
<td><a href="#edit">Editing the convert scripts</a>
<td><a href="#tg">Tested genomes</a>
<td class="colrt"><a href="#top">Go to top</a>
</table>

<a id="edit"></a>
<h3>Editing the convert scripts</h3>
<ul>
<li>The convert scripts are in the <tt>symap_5/scripts</tt> directory called
<tt>convertNCBI.java</tt> and <tt>convertEnsembl.java</tt>.
<p>
<li>Move the one you want to change to the <tt>symap_5/data/seq</tt> directory, as
it must be run from there.
<p>
<li>Once you make your changes, execute: <tt>javac ConvertNCBI.java</tt>
<br>You will need to have JDK installed to use the <tt>javac</tt> command.
<p>
<li>To run your compiled script:
<tt>java ConvertNCBI &lt;project directory name&gt;</tt>
</ul>
<p>These scripts are simply written, using only standard operations found in all major languages.

<p>
<!---------------------------------------------------------->
<a id="tg"></a>
<h3>Tested genomes</h3>

In Aug 2024, the scripts were tested on the following:
<table class=ty>
<tr><th>Genome<th>NCBI<th>Ensembl<th>Sequence<br>bp in file<th>Note
<tr><td>Arabidopsis thaliana (thale crest)<td>Chr 1-5<td>Chr 1-5<td style="text-align: right">119M<td>
<tr><td>Brassica oleracea (wild cabbage)<td>C1-C9<td>C1-C9<td style="text-align: right">489M<td>C prefixes chr#
<tr><td>Oryza sativa (rice) <td>Chr 1-12<td>Chr 1-12<td style="text-align: right">386M<td>&nbsp;
<tr><td>Prunus persica (peach)<td>G1-G8<td>G1-G8<td style="text-align: right">228M<td>G prefixes chr#
<tr><td>Prunus yedoensis<td>Scaffolds 4015<td>N/A<td style="text-align: right">319M<td>Draft
<tr><td>Caenorhabditis elegans (worm)<td>Chr I,II,III,IV,X<td>Chr I,II,III,IV,X<td style="text-align: right">100M<td>&nbsp;
<tr><td>Bemisia tabaci (whitefly)<td>Scafs 19,750<td>Contigs 227<td style="text-align: right">615M<td>&nbsp;
<tr><td>Danio rerio (zebrafish)<td>Chr 1-25<td>Chr 1-25<td style="text-align: right">52,633M<td>Contains 930 ALT CHR
<tr><td>Oryctolagus cuniculus (rabbit)<td>Chr 1-21, X<td>Chr 1-21, X<td style="text-align: right">2,841M<td>&nbsp;
<tr><td>Homo Sapiens (human)<td>Chr 1-22, X, Y<td>Chr 1-22, X, Y<td style="text-align: right">3,298M<td>&nbsp;
</table>
<p>See <a href="../SystemGuide.html#time"  class="ext" target="_blank">Times</a> for more about tested genomes and the compute time.
<h4>Load original files</h4>
<p>To <u>load the originals files</u> into SyMAP, the following was done:
<ul>
<li>Create <tt>/sequence</tt> and move the FASTA file into it.
<li>Create <tt>/annotation</tt> and move the GFF file into it.
<li>Run the <ttp>xToSymap</ttp> <ttb>Summarize</ttb> and <ttb>Lengths</ttb> functions.
<ul><li>For Ensembl, a <ttl>Minimal length</ttl> was set to only load the sequence &gt;= the smallest chromosome length.
<li>For NCBI, <ttl>Group prefix</ttl> to 'NC_' to only load the chromosomes.
</ul>

<p>For example, for species such as Homo Sapiens, if <tt>Group prefix</tt> or <tt>Minimal length</tt> were NOT specified,
over 500 sequences were loaded.
With Ensembl, it also had a problem
with duplicate entries because it has scaffold names such as HSCHR19KIR_CA01-TB04_CTG3_1 and HSCHR19KIR_CA01-TB01_CTG3_1,
where the name was truncated at the "-", hence, HSCHR19KIR_CA01 is a duplicate name.
</ul>

Problem during <ttb>Load</ttb> of originals:
<ul>
<li>Ensembl Danio rerio (zebrafish): It could not be loaded without conversion.
It has 1922 sequences where most of them had prefix "ALT", the word 'chromosome' in their header line,
and were the size of their REF chromosome,
so setting a <tt>Minimal length</tt> did not exclude them. And there was no unique chromosome ID prefix to use as
the <tt>Group prefix</tt> in <ttp>symap</ttp>.
</ul>

<p><ttb>A&S</ttb> with the originals:
<ul>
<li>Ensembl Oryza and NCBI Arabidopsis were aligned and synteny computed.
There was no problem with the Synteny, but the Arabidopsis names cluttered the displays, and there were many attributes for each.
<li>NCBI Mus musculus and Homo Sapiens were converted/split and their Chr17 successfully aligned.
</ul>

<!-------------------------------------------->
<a id="except"></a>
<h4>Exceptions</h4>
<p>Exceptions to <u>load the converted files</u> into SyMAP: The above downloaded genomes were all converted with the defaults,
with the following exceptions:
<p>
<ul>
<li>Ensembl Danio rerio (zebrafish): The 100's of 'Alt' sequences appear as valid chromosomes,
hence, the <ttl>Only #,X,Y,I</ttl> option was used.
<br>&nbsp;
<li>Ensembl Bemisia tabaci (whitefly): The words 'chromosome' or 'scaffold'
were NOT part of the header lines. The header line ID prefix was 'Contig',
hence, the <ttl>Prefix only</ttl>='Contig' was used; the output used the sequence ID prefix 'Unk'.
Then <ttb>Lengths</ttb> was used to determine a <ttl>Minimal length</ttl>
to enter on <ttp>symap</ttp> project <a href="../SystemHelp.html#projParams" class="ext" target="_blank">Parameters</a>.
<br>&nbsp;
<li>NCBI Bemisia tabaci (whitefly): Only had scaffolds, so including <ttl>Scaffolds</ttl> was necessary.
Then <ttb>Lengths</ttb> was used to determine a <ttl>Minimal length</ttl>
to enter on <ttp>symap</ttp> project <a href="../SystemHelp.html#projParams" class="ext" target="_blank">Parameters</a>.
<br>&nbsp;
<li>NCBI Prunus yedoensis:
The words 'chromosome' or 'scaffold'
were NOT part of the header lines. The header line ID prefix was 'CPJQY' (not the NCBI prefix of 'NC_'),
hence, the <ttl>Prefix only</ttl>='CPJQY' was used; the output used the sequence ID prefix 'Unk'.

<br>&nbsp;
<li>Cabbage had 'C' before its chromosome number so the chromosome names were C1, C2, etc.
<br>Peach had 'G' before its chromosome  so the chromosome names were G1, G2, etc. .
</ul>

<p><i>Input variations</i>: There are probably more variations then shown here, which may possibly be handled with the
Ensembl <ttl>Only #,X,Y,I</ttl> option or NCBI/Ensembl <ttl>Only prefix</ttl> option.
If not, you may want to edit the script to tailor it (see <a href="#edit">Edit</a>).
Alternatively,
   you can contact me (cas1@arizona.edu) and I will make the edit for you (it allows me to add the your variation to
   <ttp>xToSymap</ttp>).

<!---- END BODY -->
<table style="width: 95%"><tr><td style="text-align: left">
<td style="text-align: right"><a href="#top">Go to top</a></table>

<p class="trailer">  Email Comments To: <a href="mailto:cas1@arizona.edu">cas1@arizona.edu</a></p>
</div>
</div>
</body>
</html>
